# 这是一个关于客户保单制作的文件夹

## 概述：采集客户信息（excel），表格分很多页

<br>

## 总需求：

1. 客户可打开Web网页自行填写
2. 多页
3. （这次不需要做：随账户自动保存进度）
4. 可在手机上打开表单，方便填写，可以多屏（多页面，翻页）
5. **可切换（考虑是否识别手机用户并主动提示用户是否切换模式）切换**两种应用模式：手机模式和电脑模式：电脑模式，屏幕大，一页的内容可多一点
6. 数据要加密
7. 有后台，后台可看到客户填写的进度
8. 添加受保人：姓名、性别、生日
9. 有三个分支的表单（访客保险，外出旅行保险，陪读保险），取决于一开始选的产品类别，要分成两页：第一页选择完成后（第一页内容一样），后面看到的表单不同（第一页内容一样），但都可以增加被保人。

（需求满足顺序预想：（3，）1，2，8，4，5，6，7，9）


## 正在进行的任务:
1. 表单发送后 将关键信息（如受保人姓名，受保人性别，受保人email） 通过邮件 发送给一个邮箱


## 当务之急 （和下方的大list(s)不完全一样，要都完成）:
概述中的重点：“访客保险”也叫做“临时医疗险”，（没有加拿大保险）、是否将三个数据表做成三个页面？现在是一个页面所有数据表。（要改成三个数据表的话，数据提交需要做些变动，首先需要将主页面的基本信息保存到一个地方，并可能根据客户需求退回更改；然后等待客户选择的一个数据表的数据填写，最终一同提交。这样的话其中一个难处就是：如何在主页面提交后仅仅保存数据而不是提交，等待另一个表单数据提交后一同提交）、多添加受保人(可能会不止10个人，所以最好做成可以无限添加的表格，但这样的id和name也需要根据需求自动+-1，提交的时候也要根据对应name提交，可能比想象的要复杂)，有个选项:“是否以下/以上受保人都是一家人”，因为一家人有折扣、不太明白的点（需要亲自去保险公司尝试填写保险表来体验）：添加一个受保人后，下面出现一个表格：如果一个人，那么表格里就有1行；如果多个人，就出现第二行第三行等，除了第一行外，其他的行只包括新受保人的identical的必要信息、Summer发了一些保险公司的表单的截图，可以参考里面的input的添加方式（可以注意添加新受保人的方式和细节）、18/25保单信息：不太明白，可重复听（47'', 上面语音44''，下面语音53''）、（这个部分可能也需要去其他保险公司做表单来体验一下）登录页面可以做成填写邮箱和code，下次进入时填写相同信息，进入未完成表单继续填写（？或者用户只输入邮箱，不记住code，下一次客户使用同一个邮箱，生成新的code，也能进入未完成表单。这样的难处在于生成code后是否发送到用户邮箱，如果是的话需要额外写一个邮箱发送code来实现）、不用做登录？、20/25有些不太明白，意思好像是说把数据库的表格做出来后发给老板等上级确认（也有可能是说等客户填完表以后，在发布之前，把信息汇总后显示给客户，让其确认。这样的话需要在用户点击“提交”按钮后，传送到一个中间页面，让客户确认，而后等客户确认后将数据发送到数据库，还可以让用户进行（直接）修改。这样的一个难处就是如何把表单的数据（以PHP变量的方式）存储下来并转移给“客户确认信息”的页面，然后INSERT到db。如果用户直接修改的话，可能需要继承之前的表单的所有elements，包括id和name，进行PHP变量的重新保存）、先把数据库设计好，然后发送给老板和上级查看、手机上要让字体变大易读，可能可以让用户自行调整(字体课模仿微信公众号上的大字体)、客户提交后，发送邮件给某工作人员的邮箱提示客户提交完成了，可以设置一个按钮传送到相关页面，供工作人员进行读写（不知是做成网页的形式还是直接将数据库和关键信息发送给工作人员，这取决于工作人员是否熟悉数据库，可以向老板请示）、数据库要添加一个column用来区分操作后的客户和操作前的客户：操作前的客户工作人员可以进行操作，然后将此column更改已显示这不是新提交的信息


1. 数据库相关：
   1. （（可能晚点做）等客户填完表以后，在发布之前，把信息汇总后显示给客户，让其确认。这样的话需要在用户点击“提交”按钮后，传送到一个中间页面，让客户确认，而后等客户确认后将数据发送到数据库，还可以让用户进行（直接）修改。这样的一个难处就是如何把表单的数据（以PHP变量的方式）存储下来并转移给“客户确认信息”的页面，然后INSERT到db。如果用户直接修改的话，可能需要继承之前的表单的所有elements，包括id和name，进行PHP变量的重新保存）、
   2. 客户提交后，发送邮件给某工作人员的邮箱提示客户提交完成了，可以设置一个按钮传送到相关页面，供工作人员进行读写（不知是做成网页的形式还是直接将数据库和关键信息发送给工作人员，这取决于工作人员是否熟悉数据库，可以请问老板）、
   3. （数据库可能要连接Excel表?）
2. 前端网页相关：
   1. Summer发了一些保险公司的表单的截图，可以参考里面的input的添加方式（可以注意添加新受保人的方式和细节）、
      1. 点击next的时候确保必填项都填写，否则停留在页面显示报错
      2. 可能先做登录页面，保存在一个数据库，并试图在客户填写表单的时候
      3. Street Address可能要多几行（3-4行）
      4. 必填项显示红星
   2. 是否将三个数据表做成三个页面？现在是一个页面所有数据表。（要改成三个数据表的话，数据提交需要做些变动，首先需要将主页面的基本信息保存到一个地方，并可能根据客户需求退回更改；然后等待客户选择的一个数据表的数据填写，最终一同提交。这样的话其中一个难处就是：如何在主页面提交后仅仅保存数据而不是提交，等待另一个表单数据提交后一同提交）、
   3. 手机上要让字体变大易读，可能可以让用户自行调整(字体课模仿微信公众号上的大字体)、
   4. 19/25**不用做登录**？、
   5. （这个部分**可能不需要写**，如果写的话可能也需要去其他保险公司做表单来体验一下）登录页面可以做成填写邮箱和code，下次进入时填写相同信息，进入未完成表单继续填写（？或者用户只输入邮箱，不记住code，下一次客户使用同一个邮箱，生成新的code，也能进入未完成表单。这样的难处在于生成code后是否发送到用户邮箱，如果是的话需要额外写一个邮箱发送code来实现）
      1. 登录页面可以点击：“返回表单”，不登录就可以回到“旅游保险。。。”表单
      2. 更改登录页面：？
      3. 创建一个关于登录页面的database，有账号密码等
      4. 转到一个php页面，显示 “登录成功，？秒后回到表单，如果不成功请点击：‘返回表单’”
         1. 预设在?秒后返回表单
         2. 有一个button，点击后也能返回表单
         3. 将账号密码提交到database中




## 一部分剩余需求 (新增一些内容, 在上一个大list中)：

1. 可在手机上打开表单，方便填写，可以多屏（多页面，翻页）
2. **可切换（考虑是否识别手机用户并主动提示用户是否切换模式）切换**两种应用模式：手机模式和电脑模式：电脑模式，屏幕大，一页的内容可多一点
3. 有后台，后台可看到客户填写的进度
4. Web 表单
   1. （暂时不做）信用卡信息
   2.  分option和必选项
   3.  数据库：
       1.  疑问：投保人是否添加到form中？
       2.  根据第三页选择的表单决定提交到哪个table（可能可以用php 中的 if else）
       3.  数据要加密
       4.  点击“添加其他受保人”后，将四个必要attribute和其他的数据进行第二、三、四、。。。次提交
       5.  (让id自适应，从1开始)
   4.  （晚点做应该可以）优化input人性化：如日期
       1.  "page_2" 等文件中的 "受保人姓名"（有一个在地下被隐藏了）改成first name, middle name (optional), last name
       2.  "page_2" 等文件中的 "身故受益人"（有一个在地下被隐藏了）改成first name, middle name (optional), last name
       3.  "page_2" 等文件中的 "受保人生日"（有一个在地下被隐藏了）更人性化（现在输入和删除不好用）
       4.  "page_2" 中的 "加拿大电话" 
           1.  限制格式，保证格式准确
           2.  （上面选项实现后）可以一次性全输入和删除
       5.  "page_2" 中的 "ZIP or postal code (optional)" 限制格式 (可能可以分为两个“3英文字符”方框)
       6.  一些选项检查格式（如"联系邮箱"）
       7.  一些选项标明 "必填*"
           1.  deductible，加拿大居民出境险 中的 附加险， 是可选项

   5.  人性化设计：
       1.  检查格式，报错
       2.  优化"在加居民出境旅游保险" 中的 "在美国哪个州"和 "在哪个国家" 选项
           1.  "在美国哪个州" 连接美国数据，可搜索
           2.  "在哪个国家" 连接所有国家数据，可搜索
           3.  改成下拉
       3.  （高阶）"page_2" 中的 "Province" 和 "City":
           1.  连接加拿大的数据
           2.  做成下拉菜单
       4.   优化"提交"按钮
           1.  (最后做也可以)按"提交"后，保存信息，显示给用户， 让用户决定是否Edit
       5. Autocomplete

<br>

## bonus需求：

- 拍照信用卡，自动识别
- 表单信息（请见下方）的前两项（保险额，起付额）要做成选项
- 
<br>

## 现成的表单（可能会出现变动）：

- 旅游保险表：https://forms.gle/PLshPp1n9AUEhrp29
- 物业保险表（暂时不做）：https://forms.gle/6Th9zVT8dWTzJctE9

<br>

## 表单信息表（以下只是大概，具体根据已获得的详细图操作，随时可能变更）：

- 旅游保险：

    1. 投保额度
    2. 起付额
    3. 关于受保人
        i. 受保人姓名，与护照上英文一致（上网查格式）
        ii. 受保人生日
        iii. 受保人性别
        iv. 加拿大地址
        v. 死亡受益人姓名
        vi. 受益人与受保人关系
        vii. 受保人到达加拿大时间
    4. 保险生效开始时间
    5. 保险结束时间
    6. 关于信用卡
        i. 信用卡类型：visa/master
        ii. 信用卡上姓名。与信用卡一致
        iii. 信用卡号
        iv. 信用卡有效期
        v. CVV号
    7. 联系电子邮箱
    8. 联系电话
    9. 。。。未完。。。

<br>

## 实现步骤（逐步更新）：

    
1. 登录页面先做
   1. 可做成邮箱生成验证码的方式
   2. 
2. 
3. 查询制作 手机端表单的方法，并制作

<br>

## 可能的小细节：
- 关于一个表单，三个分支的用户操作猜想：
    1. 登录
    2. 一些根据不同选项显示出不同内容的部分（如“目的地是否在美国”、“附加险”)，若一开始选择“是”并填写了一些东西，但后面反悔，选择了“否”，那么之前选的数据最终不应该提交。这个部分可以写一个if else statement来作出两种不同的INSERT代码
    3. 进入特定表单：第一页内容和另外两个分支没区别，但后面几页可能有区别 （重要：三个分支都能增加被保人）
    

## 阶段性成果 2022.02.18.：

### 已完成： 
1. 表单网页的基本信息
2. 数据库，和现有的 表单 基本可以互通（表单的数据可以比较顺利地传到数据库）

### 正在进行：
1. 表单发送后 发送邮件

### 未完成：
1. 用户输入部分的人性化，比如必填项的设置，一些按钮的美化等（出于调试的方便，这个部分打算最后完成）
2. 登录页面和相关数据库
3. 数据加密
4. database的账号密码的隐藏
5. 手机屏幕自适应，字体调节
6. 有后台，后台可看到客户填写的进度 (暂停，因为我查了一下，网上不给我实现方法，说这样不道德，可能有隐私问题，要用户提交以后从数据库查看。其他的一些方法我尝试以后没有成功)